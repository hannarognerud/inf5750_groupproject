{"version":3,"sources":["../src/config.js"],"names":[],"mappings":";;;;;;;;;;;;6BAA0B,iBAAiB;;;;wBACV,aAAa;;AAE9C,IAAM,mBAAmB,GAAG,EAAE,CAAC;;IAEV,MAAM;aAAN,MAAM;8BAAN,MAAM;;;iBAAN,MAAM;;eACV,kBAAU;8CAAN,IAAI;AAAJ,oBAAI;;;AACjB,gBAAM,aAAa,GAAG,IAAI,CACrB,MAAM,CAAC,UAAA,GAAG;uBAAI,GAAG;aAAA,CAAC,CAAC;;AAExB,gBAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAA,YAAY;uBAAI,sBAAO,YAAY,EAAE,QAAQ,CAAC;aAAA,CAAC,EAAE;AACtE,sBAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;aACpE;;AAED,mBAAO,MAAM,CAAC,MAAM,MAAA,CAAb,MAAM,GAAQ,EAAE,qCAAoB,IAAI,EAAC,CAAC;SACpD;;;eAEwB,4BAAC,MAAM,EAAE,EAAE,EAAE;AAClC,gBAAM,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;AAC5B,cAAE,CAAC,KAAK,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC7C,cAAE,CAAC,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;;AAE5D,gBAAI,wBAAS,MAAM,CAAC,OAAO,CAAC,EAAE;AAC1B,mBAAG,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;aAClC,MAAM;AACH,mBAAG,CAAC,UAAU,WAAS,mBAAmB,CAAG,CAAC;aACjD;;AAED,gBAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE;AACpC,qBAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAC1B,OAAO,CAAC,UAAA,MAAM;2BAAI,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;iBAAA,CAAC,CAAC;aACrD;;AAED,gBAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE;AACpC,kBAAE,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;aACvD;SACJ;;;WA/BgB,MAAM;;;qBAAN,MAAM","file":"config.js","sourcesContent":["import defaultConfig from './defaultConfig';\nimport { isType, isString } from './lib/check';\n\nconst DEFAULT_API_VERSION = 24;\n\nexport default class Config {\n    static create(...args) {\n        const configObjects = args\n            .filter(arg => arg);\n\n        if (!configObjects.every(configObject => isType(configObject, 'object'))) {\n            throw new Error('Expected Config parameter to have type object');\n        }\n\n        return Object.assign({}, defaultConfig, ...args);\n    }\n\n    static processConfigForD2(config, d2) {\n        const api = d2.Api.getApi();\n        d2.model.ModelDefinition.prototype.api = api; // eslint-disable-line no-param-reassign\n        d2.models = d2.model.ModelDefinitions.getModelDefinitions(); // eslint-disable-line no-param-reassign\n\n        if (isString(config.baseUrl)) {\n            api.setBaseUrl(config.baseUrl);\n        } else {\n            api.setBaseUrl(`/api/${DEFAULT_API_VERSION}`);\n        }\n\n        if (config.i18n && config.i18n.sources) {\n            Array.from(config.i18n.sources)\n                .forEach(source => d2.i18n.addSource(source));\n        }\n\n        if (config.i18n && config.i18n.strings) {\n            d2.i18n.addStrings(Array.from(config.i18n.strings));\n        }\n    }\n}\n"]}